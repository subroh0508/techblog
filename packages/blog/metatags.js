import list from '@techblog/articles/build/list';

export default (path, query) => {
  if (path.startsWith('/articles/')) {
    return article(path);
  }

  switch (path) {
    case '/articles':
      return articles(path, query);
    case '/about':
      return about(path);
    default:
      return home(path);  
  }
};

const SITE_NAME = 'æ¨ªé ˆè³€ç¬¬283ç®¡åŒºæƒ…å ±å±€';

const TYPE_WEBSITE = 'website';
const TYPE_ARTICLE = 'article';

const home = (path) => {
  const prefix = path === '/' ? WELCOME_AA : '';

  return {
    head: prefix + metaTemplate(
      SITE_NAME,
      'Subroh Nishikoriã®æŠ€è¡“ãƒ–ãƒ­ã‚°',
      TYPE_WEBSITE,
      path,
    ),
  };
};

const articles = (path, query) => {
  if (query.tag) {
    return {
      head: metaTemplate(
        `ã‚¿ã‚°æ¤œç´¢: ${query.tag} - ${SITE_NAME}`,
        `${query.tag}ã‚¿ã‚°ä»˜ãã®å…¨ã¦ã®è¨˜äº‹`,
        TYPE_WEBSITE,
        `${path}?tag=${query.tag}`,
      ),
    }
  }  

  return {
    head: metaTemplate(
      `å…¨ã¦ã®è¨˜äº‹ - ${SITE_NAME}`,
      'å…¨ã¦ã®è¨˜äº‹',
      TYPE_WEBSITE,
      path,
    ),
  };
};

const article = (path) => {
  const title = path.replace('/articles/', '');
  const { displayTitle, description, publishedAt, updatedAt, tags } = findArticle(title) || {};

  if (!displayTitle) {
    return home(path)
  }

  return {
    head: metaTemplate(
      `${displayTitle} - ${SITE_NAME}`,
      description,
      TYPE_ARTICLE,
      path,
      publishedAt,
      updatedAt,
      tags,
    ),
  }
};

const about = (path) => ({
  head: metaTemplate(
    `ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦ - ${SITE_NAME}`,
    'ã“ã®ã‚µã‚¤ãƒˆã‚„ç­†è€…ã«ã¤ã„ã¦',
    TYPE_WEBSITE,
    path,
  ),
});

const findArticle = title => list.find(a => a.title === title);

const metaTemplate = (title, description, type, path, publishedAt = null, updatedAt = null, tags = null) => `
  <title>${title}</title>
  <meta name="description" content="${description}">

  <meta property="og:type" content="${type}">
  <meta property="og:title" content="${title}">
  <meta property="og:description" content="${description}">
  <meta property="og:url" content="https://subroh0508.net${path}">
  <meta property='og:image' content='https://subroh0508.net/icon.webp'/>
  ${type === TYPE_ARTICLE ? articleMetaTemplate(publishedAt, updatedAt, tags) : ''}

  <meta name='twitter:card' content='summary'/>
  <meta name="twitter:title" content="${title}">
  <meta name="twitter:description" content="${description}">
  <meta name="twitter:url" content="https://subroh0508.net${path}">
  <meta name='twitter:site' content='@subroh_0508'/>
  <meta name='twitter:creator' content='@subroh_0508'/>
  <meta name='twitter:image' content='https://subroh0508.net/icon.webp'/>

  <meta name='fb:app_id' content='510289996426924'/>
`;

const articleMetaTemplate = (publishedAt, updatedAt, tags) => `
  <meta property="article:published_time" content="${publishedAt}">
  <meta property="article:modified_time" content="${updatedAt}">
  <meta property="article:author" content="subroh_0508">
${tags.map(tag => `  <meta property="article:tag" content="${tag}">`).join('\n')}
`;

const WELCOME_AA = `
<!--
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ï¼¿ï¼¿ï¼¿
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€, ã‚£ã€€Â´: : : : : : : ï½€ ï½°=ã€€ã€
ã€€ã€€ã€€ã€€ã€€ ã€€ ã€€ ã€€ ã€€ ,ã‚£Â´: : : : : : : : : : : : : : : : : :ï½€ãƒ½ã€
ã€€ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ,ãƒŽ: : : : : : : :ã€: : : : : : : : : : : : : : :ãƒ½ã€
ã€€ã€€ ã€€ ã€€ ã€€ ã€€ /Â´: : : : : : : : : :ã€‰ï½¤ãƒ½ã€: :ãƒ½ã€: :ãƒ½: : : : : :ä¸¶
ã€€ã€€ã€€ã€€ ã€€ ã€€ / : : : : : : : /ã€€ /ã€€ ãƒ¾ã€ï½€ãƒ½ï¾ž ï½¤ãƒ½ }ã‚: : : : : :ãƒ½
ã€€ã€€ ã€€ ã€€ ã€€ / : : : : : : : :{ã€€,ï¾‰ã€€ã€€ï¼¿ ï½€ã€€ \`ï¾žã€€ãƒ½iã€€ãƒ½ }: :ãƒ½: ãƒˆãƒ½
ã€€ã€€ã€€ã€€ã€€ã€€/ : : : : : : : ã‚› {/ , -' Â´ã€€ã€€ã€€ã€€ã€€ ã€€ 'âŒ’ãƒ½}'ï½‰ ; ï¾ži }ã€€ \`
ã€€ã€€ ã€€ ã€€ / : : : : : : : ã€ã‚›{ ã€€ ,,ã‚£ï¼ï½°ã€€ã€€ã€€ã€€ã€€ ï½¨=ãƒ½ã€€ï¾š} }/
ã€€ã€€ã€€ã€€ ãƒŽ,ã€: : : : : : : }: : ï¾žã€€ã€Š ï¼ˆ ã—}ã€€ã€€ã€€ã€€ ã€€ {ï¼ª} .ï¼‰ //â€²
ã€€ã€€ ã€€ 'Â´Â´ {: : : : : : : :.}: : ï¾žã€ \` \`ï½°â€²ã€€ ã€€ ã€€ ï½¤\`" 'ã€€; (
ã€€ã€€ã€€ã€€ã€€ ãƒ: : : : : :.ï½†Â´ï½Œ : : \`ãƒ½ï½¤ã€ƒã€ƒã€€ ã€€ ã€€ Â´ã€ƒã€ƒï½Œ :\`ï½° ã€
ã€€ã€€ã€€ã€€ã€€ ã€€ ãƒ¾ãƒ¾ï½¤: :å¼‹ï¾ž{: : : : : :ãƒ½ã€€ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ï½Šï½¤ : : ï½†â€²
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ï½€\` ï½€ãƒ¾ï½¤ï¾žãƒ½=ãƒ½ : : ,'ã€€ã€€ã€€ã€€ ã¤ã€€ ã€€ ,ï½² { : : ï¾ž ã€
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ãƒ¾}ï¾žY: : : :ãƒˆã€€ã€ã€€ã€€ã€€ã€€ ï¼ã€€ã€€ ï½€ãƒ¾:iÂ´ï½€
ã€€ã€€ã€€ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ï½€\`ï¼— ;-\`ã€€ã€€ï¼žï½° 'â€²ã€€ã€€ã€€ã€€ ï¾šâ€²
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€r'ãƒ¼- ï½¤ã€ã€€ãƒˆâ€r ã€
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ã€€ ã€€ ã€€ ã€€ , ã‚£Â´ï½€ãƒ½,ã€ï¼¿>ãƒ½}'ï½°(/ï½¤-=ã€_
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ã€€ ,ã€€ã‚£ Â´ãƒ½ï¼ï¼}ã€€ï¼¼=ã‚ï½¤(äºŒ)ï½¤ï½€ãƒ½--ï½€ãƒ‹\`ãƒ½
ã€€ã€€ã€€ã€€ã€€ ã€€ ã€€ ã€€ /'Â´ï¿£ ãƒ½ã€€ã€€ã€€/ã€ã€€ã€€ï¼¼ã€ ã€Œã€€ã€€ï½€)ãƒ½ã€ ï¾žã€€âˆ§} ã€
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ,'ã€€ã€€ã€€ã€€ ãƒ½ã€€ ï¼¾ãƒ¾ã€ã€€ã€€ã€€ï¼¼ãƒ½\`ãƒ½>'\`ãƒ½.ãƒ½ã‚›ã€€.ãƒ½ ãƒ½
ã€€ã€€ã€€ã€€ã€€ã€€ ã€€ ã€€ {ã€€ã€€ã€€ã€€ã€€ã€€ãƒ½ ã€€ , ï½€ãƒ¾ ã€ã€€ ãƒ½ï½¤ï½€ãƒ½ã€ã€€ \`iâˆ¨ï¾žã€€ ãƒ½ãƒ½
ã€€ã€€ã€€ ã€€ ã€€ ã€€ ã€€ ï½Œã€€ã€€ã€€ã€€ã€€ã€€ã€€ãƒ½. ;ã€€ã€€ ã€€ï¾žãƒ¾ã€ã€€ãƒ½ï½¤:ï½¡ï½€ãƒ½ã€}ï¾Ÿãƒ½ï¾žã€€ã€€ãƒ½ãƒ½
ã€€ã€€ã€€ ã€€ ã€€ ã€€ ã€€ |ã€€ã€€ ã€€ ã€€ ã€€ ã€€ Y/:::: ã€€ ã€€ ï½€ãƒ¾ã€ ãƒ½:ï½¡ï¾Ÿ:ï½¡ï¾Ÿï¾žã€Oï¾žï½¤ã€€ âˆ§ï¾
.ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ã€€ {ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ;'::::::ã€€ã€€ã€€ã€€ ã€€ ï¼¼ .ãƒ½:ï½¡ï¾Ÿ:ï½¡ï¾žï½¤:ï½¡ï¾Ÿâˆ¨.ã€€ i .ï¾
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ï½Šã€€ã€€ã€€ã€€ ï¾žã€ã€€ã€€ ,':::::::ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ãƒ¾ ãƒ½ï½¡ï¾Ÿ:ï½¡ï¾žï½¤:ï½¡ï¾Ÿâˆ¨ã€€ï¾žiã€€ãƒ¾ã€
ã€€ã€€ã€€ã€€ ã€€ ã€€ ã€€ {i ã€€ ã€€ ã€€ ï¾ž,ã€€ã€€ ;::::::::: ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ãƒ¾.ãƒ½:ï½¡ï¾Ÿ:ï½¡ï¾Ÿ:ï½¡ï¾Ÿ:ï¾žã‚›ã€€ï¾ž,ã€€ ä¸¶
.ã€€ã€€ã€€ã€€ã€€ ã€€ ã€€ ï½Œ iã€€ã€€ã€€ã€€ã€€ï¾ž. ã€€,':::::::::::...ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ãƒ¾ï¾žï½¤ï¾Ÿ:ï½¡ï¾Ÿ:ï½¤:ï½¡ï¾Ÿiã€€ .ï¾žã€€ã€€ ãƒ½
ã€€ã€€ã€€ã€€ã€€ ã€€ ã€€ {. ã‚› ã€€ ã€€ ã€€ âˆ¨,' ãƒ½::::::::::... ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ãƒ¾:ï½¡ï¾Ÿ:ï½¡iï½¡0ï¾ž,ã‚›, ï¾ž.ã€€ ã€€ ã‚,ã€
ã€€ã€€ã€€ã€€ã€€ ã€€ ã€€ ï½Œã€€ã€€ã€€ã€€ã€€ã€€ã€€Y ã€€ ï¼¼::::::::::.ã€€ã€€ã€€ã€€ã€€ã€€ ã€€ O ï¾žï½¤ï½¡ï¾Ÿï¾ž:ï½¡ï¾Ÿ:ï½¡} ãƒ½ï¾ž,ã€€ã€€::å†«ï½€ï½°ã€€ã€
ã€€ã€€ ã€€ ã€€ ã€€ ã€€ {ã€€ã€€ã€€ã€€ã€€ã€€ã€€ âˆ¨ã€€ã€€ ãƒ½ã€:: ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ï¾ži:ï½¡ï¾Ÿ:}ï½¡ï¾Ÿ:ï½¡{ i ãƒ¾ã€€::::/ã€ã€€ã€€ã€€ ï½€ï¼žã€€ ã€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€,ã€€ï¼¿ã€€ , ã€
ã€€ã€€ ã€€ ã€€ ã€€ ã€€ | ã€€ ã€€ ã€€ ã€€ ã€€ /ã€€ã€€ã€€ã€€ ã€‰ã€€ã€€ã€€ã€€ã€€ã€€ ã€€ ::ã€€ã€€ }:ï½¡ï¾Ÿ:i:ï½¡ï¾Ÿ:ï½¡ãƒ¾ ï½¤ï¾žï½¤:::::::}ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ï½€ï¼žã€€ ã€ã€€ ã€€ ã€€ ã€€ ã€€ ï¼ã‚£Â´ãƒ‹ï¾†å½¡â€²
ã€€ã€€ ã€€ ã€€ ã€€ ã€€ |ã€€ã€€ ã€€ ,ã€€- 'âŒ’ãƒ½ã€€ã€€ ã€€ ãƒ½:ã€€ ã€€ ã€€ ....:::ã€€ã€€ ã€€ }:ï½¡ï¾Ÿ}:ï½¡ï¾ŸO:ï½¡ï¾Ÿãƒ½ ãƒ½ã€::::.......... ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ï½€ ãƒ¼=ã€ , ã‚£Â´ã€€ï¼,ã‚£Â´>
ã€€ã€€ ã€€ ã€€ ã€€ ã€€ |ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ï½€ãƒ½ ã€ ./::::::::::::::::::::ã€€ã€€ ã€€ ã€€ i:ï½¡ï¾Ÿ:{:ï½¡ï¾Ÿ:ï½¡ï¾Ÿ:ï½¡ï¾Ÿ:ãƒ½,/ãƒ½\`ï½° :::ï½¤_::::::::::::::::::::..........................;ã€€} ã€€ ã€€ ï½€Â´å½¡'Â´
ã€€ã€€ ã€€ ã€€ ã€€ ã€€ { ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ï¼žã€€ã€:::::::ã€€ã€€ã€€ã€€ã€€ã€€ã€€ï½Š:ï½¡ï¾Ÿ:,!:ï½¤:ï½¡ï¾Ÿ:ï½¡ï¾Ÿ:ï½¡ï¾//ãƒ¾ã€ã€€ã€€ ï½€\` ã€€ãƒ½ã€::::::::::::::::::::::::,' ,'ã€ã€€ã€€,ã€€'Â´
ã€€ã€€ ã€€ ã€€ ã€€ ã€€ ï¾žã€€ã€:::::......ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€\`ã€€ãƒ¼-ã€€ã€ã€€O ,',ï½¤'ã€€ }ï½€iãƒ½ï½²ãƒ½ ãƒ½//ãƒ¾ ã€ã€€ ã€€ ã€€ ã€€ ï½€ã€€ãƒ¼-ã€€ ï½¤_,'-'ã€€ï½€ï¼
ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ \`ï¼œã€:::::::::::........ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€,r'Â´7-â€' Â´ã€€ äºŒãƒ‹âŠƒã€ ï¾žã€âˆ¨//ãƒ¾ãƒ½
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€\`ã€€ï¼œ:::::::::::::::::::::::::::............;'ã€€/ã€€ã€€ ã€€ ï¼œã‚ ã€ ã€ ï¾Šã€ï¾žï½¤.ï¾Š////ãƒ¾ãƒ½ã€
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ >-:::ã€::::::::::::::::::::::{ã€€{â€.,-ï¼ ã€ã€€ âˆ¨iã€€ï¾ž ï¾žã€ï¾Š',ã‚ã€ãƒ½,////ãƒ½ãƒ¾ã€ã€
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ ã€€ /:::::::: ã€€ \`ã€€ï¼œã€€ã€€ ãƒˆï½¤_}/ã€€ /ï½€ï½°ï½¤_ãƒ©ã‚';ï½¤ï¾žï½¤ï¾ž }Uã€€ !ã€ï¾žï½–/////ãƒ½ãƒ¾)
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ã€€ ã€€ /::::::ã€€ ã€€ ã€€ ã€€ ã€€ \`ãƒ¼'â€²_.ã€€/ãƒ¼- ï¼ ,ã‚£ 'U'uUï¾žâ€²ã€€ãƒ½ã€€ãƒ½,/////ãƒ½ãƒ½

ã€€ã€€ã€€  ã€€    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
ã€€ã€€ã€€ã€€      â”ƒã€Žã‚ˆã†ã“ããŠè¶Šã—ãã ã•ã„ã¾ã—ãŸã€‚ã“ã®ãƒ–ãƒ­ã‚°ã«æ›¸ããŸã‚ãŸçŸ¥è¦‹ãŒã€ã¿ãªã•ã‚“ã®ãŠå½¹ã«ç«‹ã¦ã‚Œã°å¹¸ã„ã§ã™ã€‚ã€ â”ƒ
ã€€ã€€ã€€ã€€      â”ƒâ€¦å™›ã¾ãšã«è¨€ãˆãŸã€ã‚ˆãã‚„ã£ãŸãžã€ç‘žå¸Œâ€¦ðŸ˜Š                                           â”ƒ
ã€€ã€€ã€€ã€€      â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
-->
`;
